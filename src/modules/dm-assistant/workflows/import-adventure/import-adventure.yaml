workflow:
  metadata:
    id: 'import-adventure'
    name: 'Import Published Adventure'
    description: 'Process PDF/image to generate navigable area files with SlyFlourish encounter analysis'
    version: '1.1.0'
    author: 'DM Assistant'

  installed_path: '{project-root}/src/modules/dm-assistant/workflows/import-adventure'
  instructions: '{installed_path}/README.md'
  validation: '{installed_path}/README.md'

  output:
    default_output_folder: '{project-root}/sessions/{session_name}/areas/'
    default_output_files:
      - 'session-index.md'
      - 'import-summary.md'
      - 'session-prep.md'
      - 'encounter-difficulty-summary.md'

  integration:
    compatible_agents:
      - session-prep
      - campaign-manager
    compatible_workflows:
      - create-area
      - update-area


  pre_requisites:
    setup:
      - 'Review slyflourish-benchmark-guide.md for encounter difficulty calculations'
      - 'Determine target party level and size for benchmark calculations'
      - 'Calculate party group benchmark and single monster benchmark'

  steps:
    - step: 'create-session'
      title: 'Create Session Folder'
      description: 'Create organized session directory structure for this adventure session'
      template: 'session-creation.md'
      
    - step: 'upload-content'
      title: 'Upload Adventure Content'
      description: 'Upload PDF pages or images containing area descriptions'
      template: 'upload-instructions.md'
      
    - step: 'calculate-benchmarks'
      title: 'Calculate Party Benchmarks'
      description: 'Establish SlyFlourish encounter benchmarks for target party'
      template: 'slyflourish-benchmark-guide.md'
      
    - step: 'process-content'
      title: 'AI Content Processing'
      description: 'Extract area descriptions, connections, and encounters from uploaded content'
      template: 'processing-guide.md'
      
    - step: 'generate-areas'
      title: 'Generate Area Files'
      description: 'Create individual area markdown files using the area template'
      template: '../create-area/area-template.md'
      
    - step: 'create-encounters'
      title: 'Extract and Analyze Encounters'
      description: 'Identify encounters and apply SlyFlourish benchmark analysis'
      template: >
        {{#if (eq encounter.type "combat")}}
          ../create-area/combat-encounter-template.md
        {{else if (eq encounter.type "trap")}}
          ../create-area/trap-encounter-template.md
        {{else if (eq encounter.type "social")}}
          ../create-area/social-encounter-template.md
        {{else}}
          ../create-area/generic-encounter-template.md
        {{/if}}
      
    - step: 'link-navigation'
      title: 'Build Area Navigation'
      description: 'Create hyperlinks between connected areas'
      template: 'navigation-linking.md'
      
    - step: 'review-import'
      title: 'Review Generated Content'
      description: 'Validate imported areas, encounters, and difficulty assessments'
      template: 'import-review.md'


  web_bundle:
    name: 'import-adventure'
    description: 'Workflow for importing published adventures and extracting areas/encounters.'
    author: 'DM Assistant'
    instructions: 'README.md'
    validation: 'README.md'
    template: 'processing-guide.md'
    web_bundle_files:
      - 'README.md'
      - 'processing-guide.md'
      - 'encounter-extraction.md'
      - '../create-area/area-template.md'
      - '../create-area/combat-encounter-template.md'
      - '../create-area/trap-encounter-template.md'
      - '../create-area/social-encounter-template.md'
      - '../create-area/generic-encounter-template.md'

  completion:
    message: 'Adventure import complete. Area files and encounter difficulty analysis generated.'
    next_steps:
      - 'Review SlyFlourish difficulty ratings for encounter balance'
      - 'Flag severe/extreme encounters for special preparation'
      - 'Use update-area workflow to adjust difficulty if needed'
      - 'Generate table notes for session reference'